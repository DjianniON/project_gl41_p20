<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cours X</title>
    <link href="style/main.css" rel="stylesheet">
    <link href="style/chat-LO43.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css" rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://momentjs.com/downloads/moment-with-locales.js"></script>
</head>
<body class="animate__fadeIn animate__animated">
<main>
    <section class="left-panel">
        <div class="left-buttons">
            <a class="far fa-arrow-alt-circle-left return-button" href="menu.html"></a>
            <span class="button-panel">
                <i aria-hidden="true" class="fa fa-comments"></i>
            </span>
            <span class="button-panel">
                <i aria-hidden="true" class="fa fa-file"></i>
            </span>
        </div>
        <div class="chat" id="appChat">
            <div class="chat-title">
                <h1>LO43</h1>
            </div>
            <div class="chat-panel">
                <div class="chat-content" id="chat-content">
                    <div class="chat-alert-call">
                        <p>Aucune visioconférence en cours.</p>
                        <a class="visio-button" href="main-visio.html">Lancer</a>
                    </div>
                    <div class="chat-message">
                        <p class="chat-message-user">Djianni Orru-Nowicki<span
                                class="chat-message-time">Hier à 14:30</span></p>
                        <p class="chat-message-content">Test</p>
                    </div>
                    <div class="chat-message">
                        <p class="chat-message-user">Clément Couderc<span class="chat-message-time">Hier à 14:32</span>
                        </p>
                        <p class="chat-message-content">Test</p>
                        <p class="chat-message-content">Test2</p>
                    </div>
                    <div class="chat-message">
                        <p class="chat-message-user">Djianni Orru-Nowicki<span
                                class="chat-message-time">Hier à 14:30</span></p>
                        <p class="chat-message-content">Test</p>
                    </div>
                    <div class="chat-message">
                        <p class="chat-message-user">Clément Couderc<span class="chat-message-time">Hier à 14:32</span>
                        </p>
                        <p class="chat-message-content">Test</p>
                        <p class="chat-message-content">Test2</p>
                    </div>
                    <div class="chat-message">
                        <p class="chat-message-user">Djianni Orru-Nowicki<span
                                class="chat-message-time">Hier à 14:30</span></p>
                        <p class="chat-message-content">Test</p>
                    </div>
                    <div class="chat-message">
                        <p class="chat-message-user">Clément Couderc<span class="chat-message-time">Hier à 14:32</span>
                        </p>
                        <p class="chat-message-content">Test</p>
                        <p class="chat-message-content">Test2</p>
                    </div>
                    <div class="chat-message">
                        <p class="chat-message-user">Djianni Orru-Nowicki<span
                                class="chat-message-time">Hierà 14:30</span></p>
                        <p class="chat-message-content">Test</p>
                    </div>
                    <div class="chat-message">
                        <p class="chat-message-user">Clément Couderc<span class="chat-message-time">Hier à 14:32</span>
                        </p>
                        <p class="chat-message-content">Test</p>
                        <p class="chat-message-content">Test2</p>
                    </div>
                    <span v-for="message in messages">
                        <span v-html="message"></span>
                    </span>
                </div>
                <div class="chat-bottom">
                    <div class="send-area">
                        <input class="send-input" id="send-chat" placeholder="Votre message" type="text"
                               v-on:keyup.enter="sendMessage()">
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="right-panel" id="appUsers">
            <h3>Utilisateurs</h3>
        <!--[if expression]> <span v-for="user in users">
                <span v-html="user"></span>
            </span><![endif]-->
        <div class="user-span">
            <div class="user-options" v-if="booleansOptions[0]" @close="booleansOptions.splice(0, 1, false)">
                <i class="fas fa-angle-down" aria-hidden="true" @click="booleansOptions.splice(0, 1, false)"></i>
                <label for="Privileges">Privilèges</label>
                <input type="checkbox" id="Privileges" name="Privileges">
                <p class="kickuser" @click="">Exclure</p>
            </div>
            <p class="user-name user-active" @click="booleansOptions.splice(0, 1, true)" v-bind:class="{ 'user-selected': booleansOptions[0] }">Clément Couderc</p>
        </div>
        <div class="user-span">
            <div class="user-options" v-if="booleansOptions[1]" @close="booleansOptions.splice(1, 1, false)">
                <i class="fas fa-angle-down" aria-hidden="true" @click="booleansOptions.splice(1, 1, false)"></i>
                <label for="Privileges">Privilèges</label>
                <input type="checkbox" id="Privileges" name="Privileges">
                <p class="kickuser" @click="">Exclure</p>
            </div>
            <p class="user-name user-active" @click="booleansOptions.splice(1, 1, true)" v-bind:class="{ 'user-selected': booleansOptions[1] }">Charline Pascal</p>
        </div>
        <div class="user-span">
            <div class="user-options" v-if="booleansOptions[2]" @close="booleansOptions.splice(2, 1, false)">
                <i class="fas fa-angle-down" aria-hidden="true" @click="booleansOptions.splice(2, 1, false)"></i>
                <label for="Privileges">Privilèges</label>
                <input type="checkbox" id="Privileges" name="Privileges">
                <p class="kickuser" @click="">Exclure</p>
            </div>
            <p class="user-name user-active" @click="booleansOptions.splice(2, 1, true)" v-bind:class="{ 'user-selected': booleansOptions[2] }">Vladimir Lemarché</p>
        </div>
        <div class="user-span">
            <div class="user-options" v-if="booleansOptions[5]" @close="booleansOptions.splice(5, 1, false)">
                <i class="fas fa-angle-down" aria-hidden="true" @click="booleansOptions.splice(5, 1, false)"></i>
                <label for="Privileges">Privilèges</label>
                <input type="checkbox" id="Privileges" name="Privileges">
                <p class="kickuser" @click="">Exclure</p>
            </div>
            <p class="user-name user-away" @click="booleansOptions.splice(5, 1, true)" v-bind:class="{ 'user-selected': booleansOptions[5] }">Djianni Orru-Nowicki</p>
        </div>
        <div class="user-span">
            <div class="user-options" v-if="booleansOptions[3]" @close="booleansOptions.splice(3, 1, false)">
                <i class="fas fa-angle-down" aria-hidden="true" @click="booleansOptions.splice(3, 1, false)"></i>
                <label for="Privileges">Privilèges</label>
                <input type="checkbox" id="Privileges" name="Privileges">
                <p class="kickuser" @click="">Exclure</p>
            </div>
            <p class="user-name user-away" @click="booleansOptions.splice(3, 1, true)" v-bind:class="{ 'user-selected': booleansOptions[3] }">Patrice Lagard</p>
        </div>
            <h4>Hors ligne</h4>
        <div class="user-span">
            <div class="user-options" v-if="booleansOptions[4]" @close="booleansOptions.splice(4, 1, false)">
                <i class="fas fa-angle-down" aria-hidden="true" @click="booleansOptions.splice(4, 1, false)"></i>
                <label for="Privileges">Privilèges</label>
                <input type="checkbox" id="Privileges" name="Privileges">
                <p class="kickuser" @click="">Exclure</p>
            </div>
            <p class="user-name user-inactive" @click="booleansOptions.splice(4, 1, true)" v-bind:class="{ 'user-selected': booleansOptions[4] }">Marc Lachaise</p>
        </div>
    </section>
</main>

<script>
    var appChat = new Vue({
        el: "#appChat",
        data: {
            user: "Clément Couderc",
            messages: [],
        },
        methods: {
            sendMessage: function () {
                let currentDate = moment().locale('fr').calendar();
                let message = `<div class="chat-message-${this.messages.length % 2}">
                       <p class="chat-message-user"> ${this.user} <span class="chat-message-time">${currentDate}</span></p>
                       <p class="chat-message-content">${document.getElementById('send-chat').value}</p>
                   </div>`;
                this.messages.push(message);
                document.getElementById('send-chat').value = "";
            },
        },
        updated() {
            let container = this.$el.querySelector("#chat-content");
            container.scrollTop = container.scrollHeight;
        }
    })

    var appUsers = new Vue({
        el: "#appUsers",
        data: {
            users: [],
            booleansOptions: [false, false, false, false, false, false],
        },
        methods: {
            createUser : function (name) {
                this.booleansOptions.push(false);

                let user = `<div class="user-span">
                                <div class="user-options" v-if="booleansOptions[${this.users.length}]" @close="booleansOptions.splice(${this.users.length}, 1, false)">
                                    <i class="fas fa-angle-down" aria-hidden="true" @click="booleansOptions.splice(${this.users.length}, 1, false)"></i>
                                    <label for="Privileges">Privilèges</label>
                                    <input type="checkbox" id="Privileges" name="Privileges">
                                    <p class="kickuser" @click="">Exclure</p>
                                </div>
                                <p class="user-name user-active" @click="booleansOptions.splice(${this.users.length}, 1, true)" v-bind:class="{ 'user-selected': booleansOptions[${this.users.length}] }">${name}</p>
                            </div>`;
                this.users.push(user);
            },
        },


    })


</script>

</body>
</html>